# AutoPentest UI - è‡ªåŠ¨åŒ–æ¸—é€æµ‹è¯•å‰ç«¯ç•Œé¢

åŸºäº LLM é©±åŠ¨çš„è‡ªåŠ¨åŒ–æ¸—é€æµ‹è¯•å¯è§†åŒ–ç•Œé¢ï¼Œå®æ—¶å±•ç¤ºæ”»å‡»è¿‡ç¨‹å’Œ LLM åˆ†æç»“æœã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

1. **å®æ—¶æµ‹è¯•å±•ç¤º**
   - æ—¶é—´çº¿å±•ç¤ºæ¯æ¬¡æµ‹è¯•å°è¯•
   - å®æ—¶æ˜¾ç¤º LLM åˆ†æè¿‡ç¨‹
   - Payload ç”Ÿæˆå’Œæµ‹è¯•ç»“æœ
   - WAF å“åº”åˆ†æ

2. **LLM é©±åŠ¨çš„æ™ºèƒ½åˆ†æ**
   - æ ¹æ®å“åº”åŠ¨æ€è°ƒæ•´ Payload
   - è‡ªåŠ¨å°è¯•å¤šç§ç»•è¿‡æŠ€æœ¯
   - æ™ºèƒ½åˆ†æ WAF è§„åˆ™

3. **å¯è§†åŒ–ç»Ÿè®¡**
   - å°è¯•æ¬¡æ•°ç»Ÿè®¡
   - æˆåŠŸ/å¤±è´¥è®¡æ•°
   - è¿è¡Œæ—¶é—´æ˜¾ç¤º
   - è¿›åº¦æ¡æ˜¾ç¤º

4. **äº¤äº’å¼æ§åˆ¶**
   - å¯é…ç½®æµ‹è¯•å‚æ•°
   - å¯åŠ¨/åœæ­¢æµ‹è¯•
   - é€‰æ‹©æµ‹è¯•æ¨¡å¼

## å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨é¶åœºæœåŠ¡

```bash
cd vulnerable-lab
python app.py
```

é¶åœºè¿è¡Œåœ¨: `http://localhost:5000`

### 2. å¯åŠ¨ AutoPentest UI æœåŠ¡

```bash
cd vulnerable-lab
python pentest_backend.py
```

UI è¿è¡Œåœ¨: `http://localhost:5001`

### 3. è®¿é—® Web ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:5001`

## ä½¿ç”¨è¯´æ˜

### æµ‹è¯•é…ç½®

åœ¨æ§åˆ¶é¢æ¿ä¸­é…ç½®æµ‹è¯•å‚æ•°ï¼š

- **ç›®æ ‡åœ°å€**: è¦æµ‹è¯•çš„æœåŠ¡å™¨åœ°å€ (é»˜è®¤: http://localhost:5000)
- **ç«¯ç‚¹è·¯å¾„**: è¦æµ‹è¯•çš„ API ç«¯ç‚¹ (é»˜è®¤: /api/protected/user)
- **å‚æ•°å**: æ³¨å…¥å‚æ•°å (é»˜è®¤: id)
- **å‚æ•°å€¼**: å‚æ•°åŸºç¡€å€¼ (é»˜è®¤: 1)
- **æœ€å¤§è¿­ä»£æ¬¡æ•°**: LLM å°è¯•æ¬¡æ•° (é»˜è®¤: 5)
- **æµ‹è¯•æ¨¡å¼**:
  - `waf-bypass`: WAF ç»•è¿‡æµ‹è¯•
  - `sql-injection`: SQL æ³¨å…¥æ‰«æ
  - `full`: å®Œæ•´æµ‹è¯•

### æµ‹è¯•æµç¨‹

1. **åˆå§‹åŒ–é˜¶æ®µ**
   - è¿æ¥ç›®æ ‡æœåŠ¡å™¨
   - æ£€æµ‹ WAF æ˜¯å¦å¯ç”¨
   - æ”¶é›†åŸºç¡€ä¿¡æ¯

2. **LLM åˆ†æé˜¶æ®µ**
   - å‘é€è¯·æ±‚åˆ° LLM API
   - åˆ†æ WAF å“åº”æ¨¡å¼
   - ç”Ÿæˆç»•è¿‡ Payload

3. **Payload æµ‹è¯•é˜¶æ®µ**
   - å‘é€æµ‹è¯• Payload
   - æ”¶é›†å“åº”ç»“æœ
   - åˆ¤æ–­æ˜¯å¦æˆåŠŸ

4. **è¿­ä»£ä¼˜åŒ–**
   - æ ¹æ®ç»“æœè°ƒæ•´ç­–ç•¥
   - å°è¯•æ–°çš„ç»•è¿‡æŠ€æœ¯
   - é‡å¤ç›´åˆ°æˆåŠŸæˆ–è¾¾åˆ°æœ€å¤§æ¬¡æ•°

### å®æ—¶å±•ç¤º

ç•Œé¢ä¼šå®æ—¶æ˜¾ç¤ºï¼š

- **è“è‰²**: ä¿¡æ¯ç±»äº‹ä»¶ï¼ˆåˆå§‹åŒ–ã€LLM è¯·æ±‚ï¼‰
- **ç»¿è‰²**: æˆåŠŸäº‹ä»¶ï¼ˆç»•è¿‡æˆåŠŸï¼‰
- **çº¢è‰²**: é˜»æ­¢äº‹ä»¶ï¼ˆè¢« WAF é˜»æ­¢ï¼‰
- **é»„è‰²**: è­¦å‘Šäº‹ä»¶ï¼ˆé”™è¯¯ã€è¶…æ—¶ï¼‰

## æŠ€æœ¯æ¶æ„

### å‰ç«¯

- **HTML5/CSS3**: å“åº”å¼è®¾è®¡
- **JavaScript (åŸç”Ÿ)**: æ— æ¡†æ¶ä¾èµ–
- **WebSocket**: å®æ—¶é€šä¿¡

### åç«¯

- **Flask**: Web æ¡†æ¶
- **Flask-SocketIO**: WebSocket æ”¯æŒ
- **é›†æˆ WAF Bypass å·¥å…·**: æ ¸å¿ƒæµ‹è¯•é€»è¾‘

### é€šä¿¡æµç¨‹

```
å‰ç«¯ â†’ (HTTP POST) â†’ åç«¯ API â†’ å¯åŠ¨æµ‹è¯•çº¿ç¨‹
                           â†“
                    WAF Bypass å·¥å…·
                           â†“
              WebSocket â† å®æ—¶äº‹ä»¶æ¨é€
                           â†“
                        å‰ç«¯æ›´æ–°
```

## API æ¥å£

### POST /api/pentest/start
å¯åŠ¨æ¸—é€æµ‹è¯•

**è¯·æ±‚ä½“**:
```json
{
  "target": "http://localhost:5000",
  "endpoint": "/api/protected/user",
  "param": "id",
  "value": "1",
  "iterations": 5,
  "mode": "waf-bypass"
}
```

**å“åº”**:
```json
{
  "success": true,
  "test_id": "test_1",
  "message": "æµ‹è¯•å·²å¯åŠ¨"
}
```

### POST /api/pentest/stop
åœæ­¢å½“å‰æµ‹è¯•

### GET /api/pentest/status?test_id=test_1
è·å–æµ‹è¯•çŠ¶æ€

### GET /api/pentest/tests
åˆ—å‡ºæ‰€æœ‰æµ‹è¯•

## WebSocket äº‹ä»¶

### å®¢æˆ·ç«¯æ¥æ”¶äº‹ä»¶

**init**: æµ‹è¯•åˆå§‹åŒ–
```json
{
  "type": "init",
  "target": "http://localhost:5000",
  "llm_model": "glm-4-flash"
}
```

**waf_test**: WAF æ£€æµ‹ç»“æœ
```json
{
  "type": "waf_test",
  "waf_active": true,
  "waf_response": {...}
}
```

**iteration_start**: è¿­ä»£å¼€å§‹
```json
{
  "type": "iteration_start",
  "iteration": 1,
  "max_iterations": 5
}
```

**llm_response**: LLM å“åº”
```json
{
  "type": "llm_response",
  "response_preview": "{\"payload\": \"...\", \"technique\": \"...\"}"
}
```

**payload_test**: Payload æµ‹è¯•ç»“æœ
```json
{
  "type": "payload_test",
  "test_result": {
    "blocked": true,
    "payload": "...",
    "waf_reason": "SQL Injection Detected"
  }
}
```

**bypass_success**: ç»•è¿‡æˆåŠŸ
```json
{
  "type": "bypass_success",
  "iteration": 3,
  "payload": "..."
}
```

**scan_end**: æµ‹è¯•ç»“æŸ
```json
{
  "type": "scan_end",
  "success": true,
  "attempts": 3
}
```

## æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåï¼ŒæŠ¥å‘Šä¿å­˜åœ¨ `reports/` ç›®å½•ï¼š

- `pentest_test_1_20240108_153045.json` - å®Œæ•´æµ‹è¯•æ—¥å¿—
- `attack_log.json` - æ”»å‡»æ—¶é—´çº¿
- `waf_bypass_report.json` - WAF ç»•è¿‡æŠ¥å‘Š

## æˆªå›¾ç¤ºä¾‹

### ä¸»ç•Œé¢
- æ·±è‰²ä¸»é¢˜è®¾è®¡
- æ¸å˜è‰²å¼ºè°ƒé‡ç‚¹
- æ—¶é—´çº¿å±•ç¤ºæµ‹è¯•è¿‡ç¨‹

### æµ‹è¯•ä¸­
- å®æ—¶æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
- æ˜¾ç¤ºå½“å‰è¿­ä»£è¿›åº¦
- LLM å“åº”å®æ—¶å±•ç¤º

### æµ‹è¯•å®Œæˆ
- æ€»ä½“ç»Ÿè®¡æ‘˜è¦
- æ‰€æœ‰å°è¯•çš„è¯¦ç»†è®°å½•
- æˆåŠŸçš„ Payload é«˜äº®æ˜¾ç¤º

## å¸¸è§é—®é¢˜

### Q: WebSocket è¿æ¥å¤±è´¥
A: æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œåœ¨ 5001 ç«¯å£

### Q: LLM è¯·æ±‚è¶…æ—¶
A: æ£€æŸ¥ `llm_config.json` ä¸­çš„ API é…ç½®æ˜¯å¦æ­£ç¡®

### Q: æ²¡æœ‰çœ‹åˆ°å®æ—¶æ›´æ–°
A: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ WebSocket è¿æ¥é”™è¯¯

## ä¾èµ–å®‰è£…

```bash
pip install flask flask-socketio requests
```

## å®‰å…¨è¯´æ˜

âš ï¸ **æœ¬å·¥å…·ä»…ç”¨äºæˆæƒçš„å®‰å…¨æµ‹è¯•å’Œæ•™è‚²ç›®çš„**

- ç¦æ­¢ç”¨äºæœªæˆæƒçš„ç³»ç»Ÿæµ‹è¯•
- æ‰€æœ‰æµ‹è¯•åº”åœ¨éš”ç¦»ç¯å¢ƒä¸­è¿›è¡Œ
- æµ‹è¯•ç»“æœä¸å¾—ç”¨äºæ¶æ„ç›®çš„

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚
